!function(){"use strict";const e={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__submit-button",inactiveButtonClass:"modal__submit-button-inactive",inputErrorClass:"modal__input_type_error",errorClass:"modal__error"},t=(e,t,o)=>{const n=e.querySelector(`#${t.id}-error`);t.classList.remove(o.inputErrorClass),n.textContent=""},o=(e,t)=>{e.classList.add(t.inactiveButtonClass),e.disabled=!0},n=(e,t,n)=>{(e=>e.some((e=>!e.validity.valid)))(e)?o(t,n):(t.classList.remove(n.inactiveButtonClass),t.disabled=!1)},r=document.querySelector(".profile__edit-button"),a=document.querySelector(".profile__add-button"),c=document.querySelector("#editProfileModal"),s=document.querySelector("#preview-modal"),l=c.querySelector(".modal__close-button"),i=s.querySelector(".modal__image"),u=s.querySelector(".modal__caption"),d=s.querySelector(".modal__close-button_preview"),m=document.querySelector(".profile__name"),p=c.querySelector("#profile-name-input"),_=document.querySelector(".profile__description"),f=c.querySelector("#profile-description-input"),y=c.querySelector(".modal__form"),v=document.querySelector("#card-template"),S=document.querySelector(".cards__list"),g=document.querySelector("#add-card-modal"),q=g.querySelector(".modal__form"),b=g.querySelector(".modal__submit-button"),h=g.querySelector(".modal__close-button"),k=g.querySelector("#add-card-name-input"),w=g.querySelector("#add-card-link-input"),E=[c,g,s];function L(e){const t=v.content.querySelector(".card").cloneNode(!0),o=t.querySelector(".card__title"),n=t.querySelector(".card__image"),r=t.querySelector(".card__like-button"),a=t.querySelector(".card__delete-button");return o.textContent=e.name,n.src=e.link,n.alt=e.name,r.addEventListener("click",(()=>{r.classList.toggle("card__like-button_liked")})),a.addEventListener("click",(()=>{t.remove()})),n.addEventListener("click",(()=>{x(s),i.src=e.link,u.textContent=e.name,i.alt=e.name})),t}function x(e){e.classList.add("modal_opened"),document.addEventListener("keydown",z),document.addEventListener("click",j)}function C(e){e.classList.remove("modal_opened"),document.removeEventListener("keydown",z),document.removeEventListener("click",j)}function z(e){"Escape"===e.key&&E.forEach((e=>{e.classList.contains("modal_opened")&&C(e)}))}function j(e){e.target.classList.contains("modal")&&C(e.target)}var A;l.addEventListener("click",(()=>{C(c)})),r.addEventListener("click",(()=>{var o,n;p.value=m.textContent,f.value=_.textContent,o=y,n=e,[p,f].forEach((e=>{t(o,e,n)})),x(c)})),h.addEventListener("click",(()=>{C(g)})),a.addEventListener("click",(()=>{x(g)})),d.addEventListener("click",(()=>{C(s)})),y.addEventListener("submit",(function(e){e.preventDefault(),m.textContent=p.value,_.textContent=f.value,C(c)})),q.addEventListener("submit",(function(t){t.preventDefault();const n=L({name:k.value,link:w.value});S.prepend(n),t.target.reset(),o(b,e),C(g)})),[{name:"Val Thorens",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/1-photo-by-moritz-feldmann-from-pexels.jpg"},{name:"Restaurant terrace",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/2-photo-by-ceiline-from-pexels.jpg"},{name:"An outdoor cafe",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/3-photo-by-tubanur-dogan-from-pexels.jpg"},{name:"A very long bridge, over the forest and through the trees",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/4-photo-by-maurice-laschet-from-pexels.jpg"},{name:"Tunnel with morning light",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/5-photo-by-van-anh-nguyen-from-pexels.jpg"},{name:"Mountain house",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/6-photo-by-moritz-feldmann-from-pexels.jpg"},{name:"Griffin Wolldridge",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/7-photo-by-griffin-wooldridge-from-pexels.jpg"}].forEach((e=>{const t=L(e);S.prepend(t)})),A=e,Array.from(document.querySelectorAll(A.formSelector)).forEach((e=>{((e,o)=>{const r=Array.from(e.querySelectorAll(o.inputSelector)),a=e.querySelector(o.submitButtonSelector);n(r,a,o),r.forEach((c=>{c.addEventListener("input",(function(){((e,o,n)=>{o.validity.valid?t(e,o,n):((e,t,o,n)=>{const r=document.querySelector(`#${t.id}-error`);t.classList.add(n.inputErrorClass),r.textContent=o})(0,o,o.validationMessage,n)})(e,c,o),n(r,a,o)}))}))})(e,A)}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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YUMsRUFBY0MsR0FDOUNXLEVBQWtCQyxFQUFXSixFQUFlUixFQUM5QyxHQUFFLEdBQ0YsRUFNQTJFLENBQWtCN0UsRUFBYUUsRUFBTyxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9zcG90cy8uL3NyYy9zY3JpcHRzL3ZhbGlkYXRpb24uanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9zcG90cy8uL3NyYy9wYWdlcy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3Qgc2V0dGluZ3MgPSB7XG4gIGZvcm1TZWxlY3RvcjogXCIubW9kYWxfX2Zvcm1cIixcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fc3VibWl0LWJ1dHRvblwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19zdWJtaXQtYnV0dG9uLWluYWN0aXZlXCIsXG4gIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXRfdHlwZV9lcnJvclwiLFxuICBlcnJvckNsYXNzOiBcIm1vZGFsX19lcnJvclwiLFxufTtcblxuY29uc3Qgc2hvd0lucHV0RXJyb3IgPSAoXG4gIGZvcm1FbGVtZW50LFxuICBpbnB1dEVsZW1lbnQsXG4gIHZhbGlkYXRpb25NZXNzYWdlLFxuICBjb25maWdcbikgPT4ge1xuICBjb25zdCBlcnJvck1lc3NhZ2VFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICBgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcbiAgKTtcbiAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQoY29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XG4gIGVycm9yTWVzc2FnZUVsZW1lbnQudGV4dENvbnRlbnQgPSB2YWxpZGF0aW9uTWVzc2FnZTtcbn07XG5cbmNvbnN0IGhpZGVJbnB1dEVycm9yID0gKGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQsIGNvbmZpZykgPT4ge1xuICBjb25zdCBlcnJvck1lc3NhZ2VFbGVtZW50ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICBgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcbiAgKTtcbiAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XG4gIGVycm9yTWVzc2FnZUVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xufTtcblxuZnVuY3Rpb24gcmVzZXRWYWxpZGF0aW9uKGZvcm1FbGVtZW50LCBpbnB1dExpc3QsIGNvbmZpZykge1xuICBpbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICBoaWRlSW5wdXRFcnJvcihmb3JtRWxlbWVudCwgaW5wdXQsIGNvbmZpZyk7XG4gIH0pO1xufVxuXG5jb25zdCBjaGVja0lucHV0VmFsaWRpdHkgPSAoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgY29uZmlnKSA9PiB7XG4gIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgc2hvd0lucHV0RXJyb3IoXG4gICAgICBmb3JtRWxlbWVudCxcbiAgICAgIGlucHV0RWxlbWVudCxcbiAgICAgIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZSxcbiAgICAgIGNvbmZpZ1xuICAgICk7XG4gIH0gZWxzZSB7XG4gICAgaGlkZUlucHV0RXJyb3IoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgY29uZmlnKTtcbiAgfVxufTtcblxuY29uc3QgaGFzSW52YWxpZElucHV0ID0gKGlucHV0TGlzdCkgPT4ge1xuICByZXR1cm4gaW5wdXRMaXN0LnNvbWUoKGlucHV0KSA9PiB7XG4gICAgcmV0dXJuICFpbnB1dC52YWxpZGl0eS52YWxpZDtcbiAgfSk7XG59O1xuXG5leHBvcnQgY29uc3QgZGlzYWJsZUJ1dHRvbiA9IChidXR0b25FbGVtZW50LCBjb25maWcpID0+IHtcbiAgYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKGNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XG59O1xuXG5leHBvcnQgY29uc3QgdG9nZ2xlQnV0dG9uU3RhdGUgPSAoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50LCBjb25maWcpID0+IHtcbiAgaWYgKGhhc0ludmFsaWRJbnB1dChpbnB1dExpc3QpKSB7XG4gICAgZGlzYWJsZUJ1dHRvbihidXR0b25FbGVtZW50LCBjb25maWcpO1xuICB9IGVsc2Uge1xuICAgIGJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlO1xuICB9XG59O1xuXG5jb25zdCBzZXRFdmVudExpc3RlbmVycyA9IChmb3JtRWxlbWVudCwgY29uZmlnKSA9PiB7XG4gIGNvbnN0IGlucHV0TGlzdCA9IEFycmF5LmZyb20oXG4gICAgZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChjb25maWcuaW5wdXRTZWxlY3RvcilcbiAgKTtcbiAgY29uc3QgYnV0dG9uRWxlbWVudCA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcblxuICB0b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQsIGNvbmZpZyk7XG5cbiAgaW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgY2hlY2tJbnB1dFZhbGlkaXR5KGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQsIGNvbmZpZyk7XG4gICAgICB0b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQsIGNvbmZpZyk7XG4gICAgfSk7XG4gIH0pO1xufTtcblxuZXhwb3J0IGNvbnN0IGVuYWJsZVZhbGlkYXRpb24gPSAoY29uZmlnKSA9PiB7XG4gIGNvbnN0IGZvcm1MaXN0ID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGNvbmZpZy5mb3JtU2VsZWN0b3IpKTtcbiAgZm9ybUxpc3QuZm9yRWFjaCgoZm9ybUVsZW1lbnQpID0+IHtcbiAgICBzZXRFdmVudExpc3RlbmVycyhmb3JtRWxlbWVudCwgY29uZmlnKTtcbiAgfSk7XG59O1xuXG5leHBvcnQgeyByZXNldFZhbGlkYXRpb24gfTtcbiIsImltcG9ydCB7XG4gIGVuYWJsZVZhbGlkYXRpb24sXG4gIHNldHRpbmdzLFxuICByZXNldFZhbGlkYXRpb24sXG4gIGRpc2FibGVCdXR0b24sXG59IGZyb20gXCIuLi9zY3JpcHRzL3ZhbGlkYXRpb24uanNcIjtcbmltcG9ydCBcIi4vaW5kZXguY3NzXCI7XG5cbmNvbnN0IGluaXRpYWxDYXJkcyA9IFtcbiAge1xuICAgIG5hbWU6IFwiVmFsIFRob3JlbnNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvc3BvdHMvMS1waG90by1ieS1tb3JpdHotZmVsZG1hbm4tZnJvbS1wZXhlbHMuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIlJlc3RhdXJhbnQgdGVycmFjZVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9zcG90cy8yLXBob3RvLWJ5LWNlaWxpbmUtZnJvbS1wZXhlbHMuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkFuIG91dGRvb3IgY2FmZVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9zcG90cy8zLXBob3RvLWJ5LXR1YmFudXItZG9nYW4tZnJvbS1wZXhlbHMuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkEgdmVyeSBsb25nIGJyaWRnZSwgb3ZlciB0aGUgZm9yZXN0IGFuZCB0aHJvdWdoIHRoZSB0cmVlc1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9zcG90cy80LXBob3RvLWJ5LW1hdXJpY2UtbGFzY2hldC1mcm9tLXBleGVscy5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiVHVubmVsIHdpdGggbW9ybmluZyBsaWdodFwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9zcG90cy81LXBob3RvLWJ5LXZhbi1hbmgtbmd1eWVuLWZyb20tcGV4ZWxzLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJNb3VudGFpbiBob3VzZVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9zcG90cy82LXBob3RvLWJ5LW1vcml0ei1mZWxkbWFubi1mcm9tLXBleGVscy5qcGdcIixcbiAgfSxcblxuICB7XG4gICAgbmFtZTogXCJHcmlmZmluIFdvbGxkcmlkZ2VcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvc3BvdHMvNy1waG90by1ieS1ncmlmZmluLXdvb2xkcmlkZ2UtZnJvbS1wZXhlbHMuanBnXCIsXG4gIH0sXG5dO1xuXG5jb25zdCBwcm9maWxlRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdC1idXR0b25cIik7XG5jb25zdCBhZGRDYXJkTW9kYWxCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idXR0b25cIik7XG5jb25zdCBlZGl0UHJvZmlsZU1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNlZGl0UHJvZmlsZU1vZGFsXCIpO1xuY29uc3QgcHJldmlld01vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcmV2aWV3LW1vZGFsXCIpO1xuY29uc3QgY2xvc2VQcm9maWxlTW9kYWwgPSBlZGl0UHJvZmlsZU1vZGFsLnF1ZXJ5U2VsZWN0b3IoXG4gIFwiLm1vZGFsX19jbG9zZS1idXR0b25cIlxuKTtcbmNvbnN0IHByZXZpZXdNb2RhbEltYWdlID0gcHJldmlld01vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2ltYWdlXCIpO1xuY29uc3QgcHJldmlld01vZGFsQ2FwdGlvbiA9IHByZXZpZXdNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jYXB0aW9uXCIpO1xuY29uc3QgY2xvc2VQcmV2aWV3TW9kYWwgPSBwcmV2aWV3TW9kYWwucXVlcnlTZWxlY3RvcihcbiAgXCIubW9kYWxfX2Nsb3NlLWJ1dHRvbl9wcmV2aWV3XCJcbik7XG5cbmNvbnN0IHByb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19uYW1lXCIpO1xuY29uc3QgbW9kYWxOYW1lSW5wdXQgPSBlZGl0UHJvZmlsZU1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1uYW1lLWlucHV0XCIpO1xuY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiKTtcbmNvbnN0IG1vZGFsRGVzY3JpcHRpb25JbnB1dCA9IGVkaXRQcm9maWxlTW9kYWwucXVlcnlTZWxlY3RvcihcbiAgXCIjcHJvZmlsZS1kZXNjcmlwdGlvbi1pbnB1dFwiXG4pO1xuY29uc3QgZWRpdEZvcm1FbGVtZW50ID0gZWRpdFByb2ZpbGVNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xuXG5jb25zdCBjYXJkVGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtdGVtcGxhdGVcIik7XG5jb25zdCBjYXJkc2xpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19saXN0XCIpO1xuXG5jb25zdCBjYXJkTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2FkZC1jYXJkLW1vZGFsXCIpO1xuY29uc3QgY2FyZEZvcm0gPSBjYXJkTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbmNvbnN0IGNhcmRTdWJtaXRCdXR0b24gPSBjYXJkTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fc3VibWl0LWJ1dHRvblwiKTtcbmNvbnN0IGNhcmRNb2RhbENsb3NlQnV0dG9uID0gY2FyZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlLWJ1dHRvblwiKTtcbmNvbnN0IGNhcmROYW1lSW5wdXQgPSBjYXJkTW9kYWwucXVlcnlTZWxlY3RvcihcIiNhZGQtY2FyZC1uYW1lLWlucHV0XCIpO1xuY29uc3QgY2FyZExpbmtJbnB1dCA9IGNhcmRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiI2FkZC1jYXJkLWxpbmstaW5wdXRcIik7XG5jb25zdCBldnRNb2RhbHMgPSBbZWRpdFByb2ZpbGVNb2RhbCwgY2FyZE1vZGFsLCBwcmV2aWV3TW9kYWxdO1xuXG5mdW5jdGlvbiBnZXRDYXJkRWxlbWVudChkYXRhKSB7XG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZFRlbXBsYXRlLmNvbnRlbnRcbiAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpXG4gICAgLmNsb25lTm9kZSh0cnVlKTtcblxuICBjb25zdCBjYXJkTmFtZUVsZW1lbnQgPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpO1xuICBjb25zdCBjYXJkSW1hZ2VFbGVtZW50ID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcbiAgY29uc3QgY2FyZExpa2VCdXR0b24gPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpO1xuICBjb25zdCBjYXJkRGVsZXRlQnV0dG9uID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19kZWxldGUtYnV0dG9uXCIpO1xuXG4gIGNhcmROYW1lRWxlbWVudC50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcbiAgY2FyZEltYWdlRWxlbWVudC5zcmMgPSBkYXRhLmxpbms7XG4gIGNhcmRJbWFnZUVsZW1lbnQuYWx0ID0gZGF0YS5uYW1lO1xuXG4gIGNhcmRMaWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgY2FyZExpa2VCdXR0b24uY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2xpa2UtYnV0dG9uX2xpa2VkXCIpO1xuICB9KTtcblxuICBjYXJkRGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgY2FyZEVsZW1lbnQucmVtb3ZlKCk7XG4gIH0pO1xuXG4gIGNhcmRJbWFnZUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICBvcGVuTW9kYWwocHJldmlld01vZGFsKTtcbiAgICBwcmV2aWV3TW9kYWxJbWFnZS5zcmMgPSBkYXRhLmxpbms7XG4gICAgcHJldmlld01vZGFsQ2FwdGlvbi50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcbiAgICBwcmV2aWV3TW9kYWxJbWFnZS5hbHQgPSBkYXRhLm5hbWU7XG4gIH0pO1xuXG4gIHJldHVybiBjYXJkRWxlbWVudDtcbn1cblxuZnVuY3Rpb24gb3Blbk1vZGFsKG1vZGFsKSB7XG4gIG1vZGFsLmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGhhbmRsZUVzY0Nsb3NlKTtcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGhhbmRsZUNsaWNrT3V0c2lkZU1vZGFsKTtcbn1cblxuZnVuY3Rpb24gY2xvc2VNb2RhbChtb2RhbCkge1xuICBtb2RhbC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xuICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBoYW5kbGVFc2NDbG9zZSk7XG4gIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBoYW5kbGVDbGlja091dHNpZGVNb2RhbCk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUVkaXRGb3JtU3VibWl0KGV2dCkge1xuICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgcHJvZmlsZU5hbWUudGV4dENvbnRlbnQgPSBtb2RhbE5hbWVJbnB1dC52YWx1ZTtcbiAgcHJvZmlsZURlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gbW9kYWxEZXNjcmlwdGlvbklucHV0LnZhbHVlO1xuICBjbG9zZU1vZGFsKGVkaXRQcm9maWxlTW9kYWwpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVDYXJkU3VibWl0KGV2dCkge1xuICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgY29uc3QgaW5wdXRWYWx1ZXMgPSB7IG5hbWU6IGNhcmROYW1lSW5wdXQudmFsdWUsIGxpbms6IGNhcmRMaW5rSW5wdXQudmFsdWUgfTtcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBnZXRDYXJkRWxlbWVudChpbnB1dFZhbHVlcyk7XG4gIGNhcmRzbGlzdC5wcmVwZW5kKGNhcmRFbGVtZW50KTtcbiAgZXZ0LnRhcmdldC5yZXNldCgpO1xuICBkaXNhYmxlQnV0dG9uKGNhcmRTdWJtaXRCdXR0b24sIHNldHRpbmdzKTtcbiAgY2xvc2VNb2RhbChjYXJkTW9kYWwpO1xufVxuXG5jbG9zZVByb2ZpbGVNb2RhbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBjbG9zZU1vZGFsKGVkaXRQcm9maWxlTW9kYWwpO1xufSk7XG5cbnByb2ZpbGVFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIG1vZGFsTmFtZUlucHV0LnZhbHVlID0gcHJvZmlsZU5hbWUudGV4dENvbnRlbnQ7XG4gIG1vZGFsRGVzY3JpcHRpb25JbnB1dC52YWx1ZSA9IHByb2ZpbGVEZXNjcmlwdGlvbi50ZXh0Q29udGVudDtcbiAgcmVzZXRWYWxpZGF0aW9uKFxuICAgIGVkaXRGb3JtRWxlbWVudCxcbiAgICBbbW9kYWxOYW1lSW5wdXQsIG1vZGFsRGVzY3JpcHRpb25JbnB1dF0sXG4gICAgc2V0dGluZ3NcbiAgKTtcbiAgb3Blbk1vZGFsKGVkaXRQcm9maWxlTW9kYWwpO1xufSk7XG5cbmNhcmRNb2RhbENsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGNsb3NlTW9kYWwoY2FyZE1vZGFsKTtcbn0pO1xuXG5hZGRDYXJkTW9kYWxCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgb3Blbk1vZGFsKGNhcmRNb2RhbCk7XG59KTtcblxuY2xvc2VQcmV2aWV3TW9kYWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgY2xvc2VNb2RhbChwcmV2aWV3TW9kYWwpO1xufSk7XG5cbmVkaXRGb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGhhbmRsZUVkaXRGb3JtU3VibWl0KTtcbmNhcmRGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgaGFuZGxlQ2FyZFN1Ym1pdCk7XG5cbmluaXRpYWxDYXJkcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gZ2V0Q2FyZEVsZW1lbnQoaXRlbSk7XG4gIGNhcmRzbGlzdC5wcmVwZW5kKGNhcmRFbGVtZW50KTtcbn0pO1xuXG5mdW5jdGlvbiBoYW5kbGVFc2NDbG9zZShldnQpIHtcbiAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICBldnRNb2RhbHMuZm9yRWFjaCgobW9kYWwpID0+IHtcbiAgICAgIGlmIChtb2RhbC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9vcGVuZWRcIikpIHtcbiAgICAgICAgY2xvc2VNb2RhbChtb2RhbCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gaGFuZGxlQ2xpY2tPdXRzaWRlTW9kYWwoZXZ0KSB7XG4gIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsXCIpKSB7XG4gICAgY2xvc2VNb2RhbChldnQudGFyZ2V0KTtcbiAgfVxufVxuXG5lbmFibGVWYWxpZGF0aW9uKHNldHRpbmdzKTtcbiJdLCJuYW1lcyI6WyJzZXR0aW5ncyIsImZvcm1TZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiaGlkZUlucHV0RXJyb3IiLCJmb3JtRWxlbWVudCIsImlucHV0RWxlbWVudCIsImNvbmZpZyIsImVycm9yTWVzc2FnZUVsZW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiaWQiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJ0ZXh0Q29udGVudCIsImRpc2FibGVCdXR0b24iLCJidXR0b25FbGVtZW50IiwiYWRkIiwiZGlzYWJsZWQiLCJ0b2dnbGVCdXR0b25TdGF0ZSIsImlucHV0TGlzdCIsInNvbWUiLCJpbnB1dCIsInZhbGlkaXR5IiwidmFsaWQiLCJoYXNJbnZhbGlkSW5wdXQiLCJwcm9maWxlRWRpdEJ1dHRvbiIsImRvY3VtZW50IiwiYWRkQ2FyZE1vZGFsQnV0dG9uIiwiZWRpdFByb2ZpbGVNb2RhbCIsInByZXZpZXdNb2RhbCIsImNsb3NlUHJvZmlsZU1vZGFsIiwicHJldmlld01vZGFsSW1hZ2UiLCJwcmV2aWV3TW9kYWxDYXB0aW9uIiwiY2xvc2VQcmV2aWV3TW9kYWwiLCJwcm9maWxlTmFtZSIsIm1vZGFsTmFtZUlucHV0IiwicHJvZmlsZURlc2NyaXB0aW9uIiwibW9kYWxEZXNjcmlwdGlvbklucHV0IiwiZWRpdEZvcm1FbGVtZW50IiwiY2FyZFRlbXBsYXRlIiwiY2FyZHNsaXN0IiwiY2FyZE1vZGFsIiwiY2FyZEZvcm0iLCJjYXJkU3VibWl0QnV0dG9uIiwiY2FyZE1vZGFsQ2xvc2VCdXR0b24iLCJjYXJkTmFtZUlucHV0IiwiY2FyZExpbmtJbnB1dCIsImV2dE1vZGFscyIsImdldENhcmRFbGVtZW50IiwiZGF0YSIsImNhcmRFbGVtZW50IiwiY29udGVudCIsImNsb25lTm9kZSIsImNhcmROYW1lRWxlbWVudCIsImNhcmRJbWFnZUVsZW1lbnQiLCJjYXJkTGlrZUJ1dHRvbiIsImNhcmREZWxldGVCdXR0b24iLCJuYW1lIiwic3JjIiwibGluayIsImFsdCIsImFkZEV2ZW50TGlzdGVuZXIiLCJ0b2dnbGUiLCJvcGVuTW9kYWwiLCJtb2RhbCIsImhhbmRsZUVzY0Nsb3NlIiwiaGFuZGxlQ2xpY2tPdXRzaWRlTW9kYWwiLCJjbG9zZU1vZGFsIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImV2dCIsImtleSIsImZvckVhY2giLCJjb250YWlucyIsInRhcmdldCIsInZhbHVlIiwicHJldmVudERlZmF1bHQiLCJwcmVwZW5kIiwicmVzZXQiLCJpdGVtIiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsInNldEV2ZW50TGlzdGVuZXJzIiwiY2hlY2tJbnB1dFZhbGlkaXR5Iiwic2hvd0lucHV0RXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSJdLCJzb3VyY2VSb290IjoiIn0=